# Moltbot Railway Template - Deployment Configuration
# OpenClaw Gateway with built-in webchat UI
# https://docs.railway.com/deploy/config-as-code

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"
watchPatterns = ["Dockerfile", "entrypoint.sh", "src/**", "routes/**", "middleware/**", "config/**", "package*.json"]

[deploy]
# Health check - OpenClaw gateway health endpoint
healthcheckPath = "/health"
healthcheckTimeout = 120
healthcheckInterval = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Resource allocation
numReplicas = 1

# Keep running
sleepApplication = false

[deploy.env]
# Signal Configuration
SIGNAL_ENABLED = "true"
SIGNAL_DATA_DIR = "/data/.signal"
SIGNAL_CLI_PATH = "/usr/local/bin/signal-cli"

# OpenClaw Gateway Configuration
NODE_ENV = "production"
OPENCLAW_GATEWAY_PORT = "18789"
OPENCLAW_STATE_DIR = "/data/.openclaw"
