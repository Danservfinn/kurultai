{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/scene/EmpireTerrain.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, useRef, useEffect, useState } from 'react';\nimport * as THREE from 'three';\nimport { createNoise2D } from 'simplex-noise';\n\ninterface EmpireTerrainProps {\n  segments?: number;\n}\n\n// Mongol Empire approximate boundaries at its height (1279)\n// These are simplified polygon points to create the empire shape\nconst EMPIRE_BOUNDS = {\n  minLat: 22,  // South: Vietnam/South China\n  maxLat: 55,  // North: Siberia/Lake Baikal\n  minLng: 22,  // West: Eastern Europe/Hungary\n  maxLng: 135, // East: Pacific Ocean/Korea\n};\n\n// Key points defining the Mongol Empire's rough outline\n// Format: [longitude, latitude]\nconst EMPIRE_OUTLINE: [number, number][] = [\n  // Eastern border - Pacific/Korea\n  [135, 42], [133, 38], [130, 35], [128, 32], [125, 28], [122, 25], [120, 22],\n  // Southern border - Southeast Asia/China\n  [118, 22], [115, 24], [112, 22], [108, 20], [105, 22], [100, 25], [95, 22],\n  // Southwest - Tibet/Himalayas (avoided)\n  [90, 25], [85, 28], [80, 30], [75, 32],\n  // Western border - Central Asia/Persia\n  [70, 35], [65, 37], [60, 38], [55, 40], [50, 42], [45, 45], [40, 47],\n  // Northwest - Russia\n  [35, 50], [30, 52], [25, 54], [22, 55],\n  // Northern border - Siberia\n  [30, 55], [40, 54], [50, 53], [60, 52], [70, 51], [80, 50], [90, 49],\n  [100, 50], [110, 51], [120, 52], [130, 53], [135, 52],\n];\n\nexport function EmpireTerrain({ segments = 150 }: EmpireTerrainProps) {\n  const meshRef = useRef<THREE.Mesh>(null);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // Convert lat/lng to world coordinates\n  const latLngToWorld = (lat: number, lng: number): { x: number; z: number } => {\n    const x = ((lng - EMPIRE_BOUNDS.minLng) / (EMPIRE_BOUNDS.maxLng - EMPIRE_BOUNDS.minLng)) * 120 - 60;\n    const z = ((lat - EMPIRE_BOUNDS.minLat) / (EMPIRE_BOUNDS.maxLat - EMPIRE_BOUNDS.minLat)) * -70 + 35;\n    return { x, z };\n  };\n\n  // Check if a point is inside the empire using ray casting algorithm\n  const isPointInEmpire = (lat: number, lng: number): boolean => {\n    // Simple bounding box check first\n    if (lat < EMPIRE_BOUNDS.minLat || lat > EMPIRE_BOUNDS.maxLat ||\n        lng < EMPIRE_BOUNDS.minLng || lng > EMPIRE_BOUNDS.maxLng) {\n      return false;\n    }\n\n    // Ray casting algorithm\n    let inside = false;\n    for (let i = 0, j = EMPIRE_OUTLINE.length - 1; i < EMPIRE_OUTLINE.length; j = i++) {\n      const [lngi, lati] = EMPIRE_OUTLINE[i];\n      const [lngj, latj] = EMPIRE_OUTLINE[j];\n\n      if (((lati > lat) !== (latj > lat)) &&\n          (lng < (lngj - lngi) * (lat - lati) / (latj - lati) + lngi)) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  };\n\n  const geometry = useMemo(() => {\n    if (!mounted) return null;\n\n    const noise2D = createNoise2D();\n    const positions: number[] = [];\n    const indices: number[] = [];\n    const colors: number[] = [];\n    const uvs: number[] = [];\n\n    const width = 120;\n    const depth = 70;\n\n    // Generate grid\n    for (let z = 0; z <= segments; z++) {\n      for (let x = 0; x <= segments; x++) {\n        const xPos = (x / segments) * width - width / 2;\n        const zPos = (z / segments) * depth - depth / 2;\n\n        // Convert to lat/lng\n        const lng = ((xPos + 60) / 120) * (EMPIRE_BOUNDS.maxLng - EMPIRE_BOUNDS.minLng) + EMPIRE_BOUNDS.minLng;\n        const lat = ((zPos - 35) / -70) * (EMPIRE_BOUNDS.maxLat - EMPIRE_BOUNDS.minLat) + EMPIRE_BOUNDS.minLat;\n\n        // Check if inside empire\n        const inEmpire = isPointInEmpire(lat, lng);\n\n        // Height based on terrain features\n        let height = 0;\n\n        if (inEmpire) {\n          // Subtle terrain variation within empire\n          height = noise2D(xPos * 0.03, zPos * 0.03) * 0.2;\n          height += noise2D(xPos * 0.08, zPos * 0.08) * 0.1;\n\n          // Gobi Desert - slight depression\n          const gobiDist = Math.sqrt(Math.pow(lng - 105, 2) + Math.pow(lat - 42, 2));\n          if (gobiDist < 15) {\n            height -= 0.1;\n          }\n\n          // Mongolian heartland - slight elevation\n          const heartlandDist = Math.sqrt(Math.pow(lng - 100, 2) + Math.pow(lat - 47, 2));\n          if (heartlandDist < 10) {\n            height += 0.15;\n          }\n        } else {\n          // Outside empire - deep drop-off\n          height = -2;\n        }\n\n        positions.push(xPos, height, zPos);\n        uvs.push(x / segments, z / segments);\n\n        // Color based on region\n        let r = 0.35, g = 0.45, b = 0.28; // Default steppe green\n\n        if (!inEmpire) {\n          // Outside empire - darker\n          r = 0.15; g = 0.2; b = 0.15;\n        } else {\n          // Gobi Desert - sandy\n          const gobiDist = Math.sqrt(Math.pow(lng - 105, 2) + Math.pow(lat - 42, 2));\n          if (gobiDist < 12) {\n            r = 0.65; g = 0.55; b = 0.35;\n          }\n\n          // Northern forests - darker green\n          if (lat > 50) {\n            r = 0.25; g = 0.4; b = 0.25;\n          }\n\n          // Southern China - lighter green\n          if (lat < 35) {\n            r = 0.4; g = 0.5; b = 0.3;\n          }\n        }\n\n        colors.push(r, g, b);\n      }\n    }\n\n    // Generate indices\n    for (let z = 0; z < segments; z++) {\n      for (let x = 0; x < segments; x++) {\n        const a = z * (segments + 1) + x;\n        const b = a + 1;\n        const c = (z + 1) * (segments + 1) + x;\n        const d = c + 1;\n\n        indices.push(a, c, b);\n        indices.push(b, c, d);\n      }\n    }\n\n    const geo = new THREE.BufferGeometry();\n    geo.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));\n    geo.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));\n    geo.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\n    geo.setIndex(indices);\n    geo.computeVertexNormals();\n\n    return geo;\n  }, [segments, mounted]);\n\n  if (!mounted || !geometry) {\n    return null;\n  }\n\n  return (\n    <mesh ref={meshRef} geometry={geometry} receiveShadow>\n      <meshStandardMaterial\n        vertexColors\n        roughness={0.9}\n        metalness={0.05}\n        flatShading\n      />\n    </mesh>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 365, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/scene/Rivers.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport * as THREE from 'three';\n\n// Major rivers in the Mongol Empire\nconst RIVERS = [\n  {\n    name: 'Volga',\n    points: [\n      { lat: 48.5, lng: 45.0 }, // Sarai Batu area\n      { lat: 48.0, lng: 44.5 },\n      { lat: 47.0, lng: 44.0 },\n      { lat: 46.0, lng: 44.5 },\n      { lat: 45.0, lng: 45.0 },\n    ],\n  },\n  {\n    name: 'Orkhon',\n    points: [\n      { lat: 47.5, lng: 102.0 },\n      { lat: 47.2, lng: 102.5 }, // Karakorum\n      { lat: 47.0, lng: 103.0 },\n      { lat: 46.5, lng: 104.0 },\n    ],\n  },\n  {\n    name: 'Ili',\n    points: [\n      { lat: 45.0, lng: 76.0 },\n      { lat: 44.5, lng: 77.0 },\n      { lat: 44.0, lng: 78.5 }, // Almaliq area\n      { lat: 43.5, lng: 80.0 },\n    ],\n  },\n];\n\nfunction latLngToWorld(lat: number, lng: number): { x: number; z: number } {\n  const x = ((lng - 20) / 110) * 100 - 50;\n  const z = ((lat - 35) / 20) * -50 + 25;\n  return { x, z };\n}\n\nexport function Rivers() {\n  const riverGeometries = useMemo(() => {\n    return RIVERS.map((river) => {\n      const points = river.points.map((p) => {\n        const { x, z } = latLngToWorld(p.lat, p.lng);\n        return new THREE.Vector3(x, 0.2, z);\n      });\n\n      const curve = new THREE.CatmullRomCurve3(points);\n      const geometry = new THREE.TubeGeometry(curve, 32, 0.3, 8, false);\n\n      return { name: river.name, geometry };\n    });\n  }, []);\n\n  return (\n    <>\n      {riverGeometries.map((river) => (\n        <mesh key={river.name} geometry={river.geometry}>\n          <meshStandardMaterial\n            color=\"#1e3a5f\"\n            transparent\n            opacity={0.7}\n            roughness={0.2}\n            metalness={0.8}\n          />\n        </mesh>\n      ))}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,oCAAoC;AACpC,MAAM,SAAS;IACb;QACE,MAAM;QACN,QAAQ;YACN;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;SACxB;IACH;IACA;QACE,MAAM;QACN,QAAQ;YACN;gBAAE,KAAK;gBAAM,KAAK;YAAM;YACxB;gBAAE,KAAK;gBAAM,KAAK;YAAM;YACxB;gBAAE,KAAK;gBAAM,KAAK;YAAM;YACxB;gBAAE,KAAK;gBAAM,KAAK;YAAM;SACzB;IACH;IACA;QACE,MAAM;QACN,QAAQ;YACN;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;YACvB;gBAAE,KAAK;gBAAM,KAAK;YAAK;SACxB;IACH;CACD;AAED,SAAS,cAAc,GAAW,EAAE,GAAW;IAC7C,MAAM,IAAI,AAAC,CAAC,MAAM,EAAE,IAAI,MAAO,MAAM;IACrC,MAAM,IAAI,AAAC,CAAC,MAAM,EAAE,IAAI,KAAM,CAAC,KAAK;IACpC,OAAO;QAAE;QAAG;IAAE;AAChB;AAEO,SAAS;;IACd,MAAM,kBAAkB,IAAA,2MAAO;2CAAC;YAC9B,OAAO,OAAO,GAAG;mDAAC,CAAC;oBACjB,MAAM,SAAS,MAAM,MAAM,CAAC,GAAG;kEAAC,CAAC;4BAC/B,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,GAAG,EAAE,EAAE,GAAG;4BAC3C,OAAO,IAAI,gMAAa,CAAC,GAAG,KAAK;wBACnC;;oBAEA,MAAM,QAAQ,IAAI,yMAAsB,CAAC;oBACzC,MAAM,WAAW,IAAI,qMAAkB,CAAC,OAAO,IAAI,KAAK,GAAG;oBAE3D,OAAO;wBAAE,MAAM,MAAM,IAAI;wBAAE;oBAAS;gBACtC;;QACF;0CAAG,EAAE;IAEL,qBACE;kBACG,gBAAgB,GAAG,CAAC,CAAC,sBACpB,gOAAC;gBAAsB,UAAU,MAAM,QAAQ;0BAC7C,cAAA,gOAAC;oBACC,OAAM;oBACN,WAAW;oBACX,SAAS;oBACT,WAAW;oBACX,WAAW;;;;;;eANJ,MAAM,IAAI;;;;;;AAY7B;GA9BgB;KAAA"}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/scene/SkyEnvironment.tsx"],"sourcesContent":["'use client';\n\nimport { Sky, Stars } from '@react-three/drei';\n\nexport function SkyEnvironment() {\n  return (\n    <>\n      <Sky\n        distance={450000}\n        sunPosition={[100, 20, 100]}\n        inclination={0.49}\n        azimuth={0.25}\n        mieCoefficient={0.005}\n        mieDirectionalG={0.8}\n        rayleigh={0.5}\n        turbidity={8}\n      />\n      <Stars radius={100} depth={50} count={5000} factor={4} saturation={0} fade speed={1} />\n      <ambientLight intensity={0.4} />\n      <directionalLight\n        position={[100, 50, 100]}\n        intensity={1.2}\n        castShadow\n        shadow-mapSize={[2048, 2048]}\n        shadow-camera-left={-50}\n        shadow-camera-right={50}\n        shadow-camera-top={50}\n        shadow-camera-bottom={-50}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAIO,SAAS;IACd,qBACE;;0BACE,gOAAC,oMAAG;gBACF,UAAU;gBACV,aAAa;oBAAC;oBAAK;oBAAI;iBAAI;gBAC3B,aAAa;gBACb,SAAS;gBACT,gBAAgB;gBAChB,iBAAiB;gBACjB,UAAU;gBACV,WAAW;;;;;;0BAEb,gOAAC,wMAAK;gBAAC,QAAQ;gBAAK,OAAO;gBAAI,OAAO;gBAAM,QAAQ;gBAAG,YAAY;gBAAG,IAAI;gBAAC,OAAO;;;;;;0BAClF,gOAAC;gBAAa,WAAW;;;;;;0BACzB,gOAAC;gBACC,UAAU;oBAAC;oBAAK;oBAAI;iBAAI;gBACxB,WAAW;gBACX,UAAU;gBACV,kBAAgB;oBAAC;oBAAM;iBAAK;gBAC5B,sBAAoB,CAAC;gBACrB,uBAAqB;gBACrB,qBAAmB;gBACnB,wBAAsB,CAAC;;;;;;;;AAI/B;KA3BgB"}},
    {"offset": {"line": 594, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/agents/AgentMesh.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useMemo } from 'react';\nimport * as THREE from 'three';\nimport { useFrame } from '@react-three/fiber';\nimport { Agent } from '@/app/types/agents';\n\ninterface AgentMeshProps {\n  agent: Agent;\n  isSelected: boolean;\n  isHovered: boolean;\n}\n\nexport function AgentMesh({ agent, isSelected, isHovered }: AgentMeshProps) {\n  const groupRef = useRef<THREE.Group>(null);\n  const glowRef = useRef<THREE.Mesh>(null);\n\n  // Procedural agent geometry - stylized human figure\n  const { bodyGeometry, headGeometry, crownGeometry } = useMemo(() => {\n    // Body - cylinder\n    const bodyGeo = new THREE.CylinderGeometry(0.3, 0.4, 1.2, 8);\n    bodyGeo.translate(0, 0.6, 0);\n\n    // Head - sphere\n    const headGeo = new THREE.SphereGeometry(0.35, 16, 16);\n    headGeo.translate(0, 1.5, 0);\n\n    // Crown/helmet - torus or cone depending on role\n    let crownGeo: THREE.BufferGeometry;\n    if (agent.role === 'coordinator') {\n      // Crown for Kublai\n      crownGeo = new THREE.ConeGeometry(0.4, 0.3, 8);\n      crownGeo.translate(0, 1.85, 0);\n    } else if (agent.role === 'developer') {\n      // Helmet for Temujin\n      crownGeo = new THREE.SphereGeometry(0.38, 16, 16, 0, Math.PI * 2, 0, Math.PI / 2);\n      crownGeo.translate(0, 1.5, 0);\n    } else {\n      // Simple cap for others\n      crownGeo = new THREE.CylinderGeometry(0.25, 0.3, 0.2, 8);\n      crownGeo.translate(0, 1.8, 0);\n    }\n\n    return { bodyGeometry: bodyGeo, headGeometry: headGeo, crownGeometry: crownGeo };\n  }, [agent.role]);\n\n  // Animation - gentle breathing/floating\n  useFrame((state) => {\n    if (groupRef.current) {\n      const time = state.clock.getElapsedTime();\n      // Breathing animation\n      groupRef.current.position.y = agent.position.elevation + Math.sin(time * 2) * 0.05;\n\n      // Working animation - faster movement when working\n      if (agent.status === 'working') {\n        groupRef.current.rotation.y = Math.sin(time * 3) * 0.1;\n      }\n    }\n\n    if (glowRef.current) {\n      const time = state.clock.getElapsedTime();\n      const baseIntensity = agent.status === 'working' ? 2 : 1;\n      const pulseSpeed = agent.status === 'alert' ? 8 : 2;\n      const material = glowRef.current.material as THREE.MeshBasicMaterial;\n      material.opacity = (0.3 + Math.sin(time * pulseSpeed) * 0.2) * baseIntensity;\n    }\n  });\n\n  const glowColor = agent.theme.glow;\n  const scale = isSelected ? 1.3 : isHovered ? 1.15 : 1;\n\n  return (\n    <group\n      ref={groupRef}\n      position={[agent.position.x, agent.position.elevation, agent.position.z]}\n      scale={[scale, scale, scale]}\n    >\n      {/* Glow effect */}\n      <mesh ref={glowRef} position={[0, 1, 0]}>\n        <sphereGeometry args={[1.2, 16, 16]} />\n        <meshBasicMaterial color={glowColor} transparent opacity={0.3} />\n      </mesh>\n\n      {/* Body */}\n      <mesh geometry={bodyGeometry} castShadow>\n        <meshStandardMaterial\n          color={agent.theme.primary}\n          roughness={0.7}\n          metalness={0.3}\n        />\n      </mesh>\n\n      {/* Head */}\n      <mesh geometry={headGeometry} castShadow>\n        <meshStandardMaterial\n          color={agent.theme.secondary}\n          roughness={0.5}\n          metalness={0.2}\n        />\n      </mesh>\n\n      {/* Crown/Helmet */}\n      <mesh geometry={crownGeometry} castShadow>\n        <meshStandardMaterial\n          color={agent.theme.glow}\n          roughness={0.3}\n          metalness={0.8}\n          emissive={agent.theme.glow}\n          emissiveIntensity={0.3}\n        />\n      </mesh>\n\n      {/* Selection ring */}\n      {isSelected && (\n        <mesh position={[0, 0.1, 0]} rotation={[-Math.PI / 2, 0, 0]}>\n          <ringGeometry args={[1, 1.3, 32]} />\n          <meshBasicMaterial color={agent.theme.glow} transparent opacity={0.8} />\n        </mesh>\n      )}\n    </group>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 828, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/agents/AgentCamp.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, ReactElement } from 'react';\nimport * as THREE from 'three';\nimport { Agent } from '@/app/types/agents';\n\ninterface AgentCampProps {\n  agent: Agent;\n}\n\nexport function AgentCamp({ agent }: AgentCampProps) {\n  const campElements = useMemo(() => {\n    const elements: ReactElement[] = [];\n    const { x, z, elevation } = agent.position;\n\n    // Base platform\n    elements.push(\n      <mesh key=\"platform\" position={[x, elevation - 0.1, z]} receiveShadow>\n        <cylinderGeometry args={[2.5, 2.5, 0.2, 16]} />\n        <meshStandardMaterial color=\"#5c4a3d\" roughness={0.9} />\n      </mesh>\n    );\n\n    // Camp-specific elements based on type\n    switch (agent.camp.type) {\n      case 'forge':\n        // Temujin's forge\n        elements.push(\n          <mesh key=\"anvil\" position={[x + 1, elevation + 0.3, z + 1]} castShadow>\n            <boxGeometry args={[0.4, 0.6, 0.3]} />\n            <meshStandardMaterial color=\"#2a2a2a\" roughness={0.5} metalness={0.8} />\n          </mesh>,\n          <mesh key=\"banner\" position={[x - 1.5, elevation + 1.5, z - 1]} castShadow>\n            <cylinderGeometry args={[0.05, 0.05, 3, 8]} />\n            <meshStandardMaterial color=\"#8b4513\" />\n          </mesh>,\n          <mesh key=\"flag\" position={[x - 1.5, elevation + 2.5, z - 1]} castShadow>\n            <boxGeometry args={[0.8, 0.5, 0.05]} />\n            <meshStandardMaterial color={agent.theme.glow} />\n          </mesh>\n        );\n        break;\n\n      case 'caravanserai':\n        // Trading post for Ogedei/Chagatai\n        elements.push(\n          <mesh key=\"tent\" position={[x + 1.2, elevation + 0.8, z]} castShadow>\n            <coneGeometry args={[1, 1.6, 8]} />\n            <meshStandardMaterial color=\"#d4a574\" roughness={0.8} />\n          </mesh>,\n          <mesh key=\"crate1\" position={[x - 1, elevation + 0.2, z + 1]} castShadow>\n            <boxGeometry args={[0.5, 0.4, 0.5]} />\n            <meshStandardMaterial color=\"#8b4513\" />\n          </mesh>,\n          <mesh key=\"crate2\" position={[x - 0.8, elevation + 0.25, z + 1.3]} castShadow>\n            <boxGeometry args={[0.4, 0.5, 0.4]} />\n            <meshStandardMaterial color=\"#a0522d\" />\n          </mesh>\n        );\n        break;\n\n      case 'observatory':\n        // Scholarly retreat for Mongke\n        elements.push(\n          <mesh key=\"table\" position={[x + 1, elevation + 0.3, z + 0.5]} castShadow>\n            <boxGeometry args={[1, 0.6, 0.6]} />\n            <meshStandardMaterial color=\"#654321\" />\n          </mesh>,\n          <mesh key=\"scroll\" position={[x + 1, elevation + 0.65, z + 0.5]} rotation={[Math.PI / 2, 0, 0]} castShadow>\n            <cylinderGeometry args={[0.1, 0.1, 0.4, 8]} />\n            <meshStandardMaterial color=\"#f5f5dc\" />\n          </mesh>,\n          <mesh key=\"telescope\" position={[x - 1, elevation + 0.8, z - 0.5]} rotation={[Math.PI / 4, 0, Math.PI / 6]} castShadow>\n            <cylinderGeometry args={[0.08, 0.1, 1.2, 8]} />\n            <meshStandardMaterial color=\"#4a4a4a\" metalness={0.6} />\n          </mesh>\n        );\n        break;\n\n      case 'palace':\n        // Imperial palace for Kublai\n        elements.push(\n          <mesh key=\"throne\" position={[x + 0.8, elevation + 0.5, z]} castShadow>\n            <boxGeometry args={[0.8, 1, 0.6]} />\n            <meshStandardMaterial color={agent.theme.secondary} metalness={0.4} />\n          </mesh>,\n          <mesh key=\"canopy\" position={[x + 0.8, elevation + 1.3, z]} rotation={[0, Math.PI / 4, 0]} castShadow>\n            <coneGeometry args={[1.2, 0.6, 4]} />\n            <meshStandardMaterial color={agent.theme.primary} />\n          </mesh>,\n          <mesh key=\"banner1\" position={[x - 1.2, elevation + 1.2, z + 1]} castShadow>\n            <cylinderGeometry args={[0.03, 0.03, 2.4, 6]} />\n            <meshStandardMaterial color={agent.theme.glow} />\n          </mesh>\n        );\n        break;\n\n      case 'counting-house':\n        // Administrative center for Jochi\n        elements.push(\n          <mesh key=\"desk\" position={[x + 1, elevation + 0.35, z]} castShadow>\n            <boxGeometry args={[1.2, 0.7, 0.6]} />\n            <meshStandardMaterial color=\"#5c4033\" />\n          </mesh>,\n          <mesh key=\"abacus\" position={[x + 1, elevation + 0.75, z]} castShadow>\n            <boxGeometry args={[0.4, 0.2, 0.3]} />\n            <meshStandardMaterial color=\"#8b4513\" />\n          </mesh>,\n          <mesh key=\"chest\" position={[x - 1, elevation + 0.3, z + 0.8]} castShadow>\n            <boxGeometry args={[0.6, 0.4, 0.4]} />\n            <meshStandardMaterial color=\"#ffd700\" metalness={0.5} />\n          </mesh>\n        );\n        break;\n    }\n\n    return elements;\n  }, [agent]);\n\n  return <group>{campElements}</group>;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1416, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/agents/StatusIndicator.tsx"],"sourcesContent":["'use client';\n\nimport { useRef } from 'react';\nimport * as THREE from 'three';\nimport { useFrame } from '@react-three/fiber';\nimport { AgentStatus } from '@/app/types/agents';\n\ninterface StatusIndicatorProps {\n  status: AgentStatus;\n  position: { x: number; y: number; z: number };\n}\n\nconst STATUS_COLORS: Record<AgentStatus, string> = {\n  idle: '#22c55e',      // Green\n  working: '#3b82f6',   // Blue\n  reviewing: '#f59e0b', // Amber\n  alert: '#ef4444',     // Red\n  offline: '#6b7280',   // Gray\n};\n\nexport function StatusIndicator({ status, position }: StatusIndicatorProps) {\n  const indicatorRef = useRef<THREE.Mesh>(null);\n  const ringRef = useRef<THREE.Mesh>(null);\n\n  useFrame((state) => {\n    const time = state.clock.getElapsedTime();\n\n    if (indicatorRef.current) {\n      // Floating animation\n      indicatorRef.current.position.y = position.y + 2.5 + Math.sin(time * 3) * 0.1;\n\n      // Pulse effect for working/alert\n      if (status === 'working' || status === 'alert') {\n        const pulseSpeed = status === 'alert' ? 10 : 4;\n        const scale = 1 + Math.sin(time * pulseSpeed) * 0.15;\n        indicatorRef.current.scale.set(scale, scale, scale);\n      }\n    }\n\n    if (ringRef.current) {\n      ringRef.current.rotation.z = time * 0.5;\n      ringRef.current.rotation.x = Math.sin(time * 0.5) * 0.2;\n    }\n  });\n\n  const color = STATUS_COLORS[status];\n\n  return (\n    <group position={[position.x, position.y, position.z]}>\n      {/* Main indicator */}\n      <mesh ref={indicatorRef} position={[0, 2.5, 0]}>\n        <sphereGeometry args={[0.25, 16, 16]} />\n        <meshStandardMaterial\n          color={color}\n          emissive={color}\n          emissiveIntensity={0.5}\n        />\n      </mesh>\n\n      {/* Rotating ring */}\n      <mesh ref={ringRef} position={[0, 2.5, 0]}>\n        <ringGeometry args={[0.4, 0.45, 16]} />\n        <meshBasicMaterial color={color} transparent opacity={0.6} side={THREE.DoubleSide} />\n      </mesh>\n\n      {/* Status label background */}\n      <mesh position={[0, 2.5, 0]}>\n        <planeGeometry args={[1.2, 0.4]} />\n        <meshBasicMaterial color=\"rgba(0,0,0,0.7)\" transparent />\n      </mesh>\n    </group>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAYA,MAAM,gBAA6C;IACjD,MAAM;IACN,SAAS;IACT,WAAW;IACX,OAAO;IACP,SAAS;AACX;AAEO,SAAS,gBAAgB,EAAE,MAAM,EAAE,QAAQ,EAAwB;;IACxE,MAAM,eAAe,IAAA,0MAAM,EAAa;IACxC,MAAM,UAAU,IAAA,0MAAM,EAAa;IAEnC,IAAA,iQAAQ;oCAAC,CAAC;YACR,MAAM,OAAO,MAAM,KAAK,CAAC,cAAc;YAEvC,IAAI,aAAa,OAAO,EAAE;gBACxB,qBAAqB;gBACrB,aAAa,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,GAAG,MAAM,KAAK,GAAG,CAAC,OAAO,KAAK;gBAE1E,iCAAiC;gBACjC,IAAI,WAAW,aAAa,WAAW,SAAS;oBAC9C,MAAM,aAAa,WAAW,UAAU,KAAK;oBAC7C,MAAM,QAAQ,IAAI,KAAK,GAAG,CAAC,OAAO,cAAc;oBAChD,aAAa,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,OAAO;gBAC/C;YACF;YAEA,IAAI,QAAQ,OAAO,EAAE;gBACnB,QAAQ,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO;gBACpC,QAAQ,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO,OAAO;YACtD;QACF;;IAEA,MAAM,QAAQ,aAAa,CAAC,OAAO;IAEnC,qBACE,gOAAC;QAAM,UAAU;YAAC,SAAS,CAAC;YAAE,SAAS,CAAC;YAAE,SAAS,CAAC;SAAC;;0BAEnD,gOAAC;gBAAK,KAAK;gBAAc,UAAU;oBAAC;oBAAG;oBAAK;iBAAE;;kCAC5C,gOAAC;wBAAe,MAAM;4BAAC;4BAAM;4BAAI;yBAAG;;;;;;kCACpC,gOAAC;wBACC,OAAO;wBACP,UAAU;wBACV,mBAAmB;;;;;;;;;;;;0BAKvB,gOAAC;gBAAK,KAAK;gBAAS,UAAU;oBAAC;oBAAG;oBAAK;iBAAE;;kCACvC,gOAAC;wBAAa,MAAM;4BAAC;4BAAK;4BAAM;yBAAG;;;;;;kCACnC,gOAAC;wBAAkB,OAAO;wBAAO,WAAW;wBAAC,SAAS;wBAAK,MAAM,mMAAgB;;;;;;;;;;;;0BAInF,gOAAC;gBAAK,UAAU;oBAAC;oBAAG;oBAAK;iBAAE;;kCACzB,gOAAC;wBAAc,MAAM;4BAAC;4BAAK;yBAAI;;;;;;kCAC/B,gOAAC;wBAAkB,OAAM;wBAAkB,WAAW;;;;;;;;;;;;;;;;;;AAI9D;GApDgB;;QAId,iQAAQ;;;KAJM"}},
    {"offset": {"line": 1590, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/agents/AgentTaskLabel.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useMemo } from 'react';\nimport * as THREE from 'three';\nimport { useFrame } from '@react-three/fiber';\nimport { Html } from '@react-three/drei';\nimport { Agent } from '@/app/types/agents';\n\ninterface AgentTaskLabelProps {\n  agent: Agent;\n}\n\nconst STATUS_COLORS: Record<Agent['status'], string> = {\n  idle: '#22c55e',\n  working: '#3b82f6',\n  reviewing: '#f59e0b',\n  alert: '#ef4444',\n  offline: '#6b7280',\n};\n\nexport function AgentTaskLabel({ agent }: AgentTaskLabelProps) {\n  const groupRef = useRef<THREE.Group>(null);\n\n  // Animation - float above agent\n  useFrame((state) => {\n    if (groupRef.current) {\n      const time = state.clock.getElapsedTime();\n      groupRef.current.position.y = agent.position.elevation + 3.5 + Math.sin(time * 2) * 0.1;\n    }\n  });\n\n  const statusColor = STATUS_COLORS[agent.status];\n  const queueCount = agent.queue?.length || 0;\n  const hasTask = !!agent.currentTask;\n\n  return (\n    <group\n      ref={groupRef}\n      position={[agent.position.x, agent.position.elevation + 3.5, agent.position.z]}\n    >\n      <Html\n        center\n        distanceFactor={12}\n        style={{\n          pointerEvents: 'none',\n          userSelect: 'none',\n        }}\n      >\n        <div className=\"flex flex-col items-center gap-2\">\n          {/* Status Badge */}\n          <div\n            className=\"px-3 py-1 rounded-full text-sm font-bold uppercase tracking-wider text-white shadow-lg\"\n            style={{\n              backgroundColor: statusColor,\n              boxShadow: `0 0 15px ${statusColor}`,\n            }}\n          >\n            {agent.status}\n          </div>\n\n          {/* Current Task */}\n          {hasTask && (\n            <div className=\"bg-black/80 backdrop-blur-sm rounded-lg px-4 py-3 text-center min-w-[220px] border border-white/20\">\n              <div className=\"text-white text-base font-medium truncate\">\n                {agent.currentTask?.title}\n              </div>\n              <div className=\"text-white/60 text-sm mt-1\">\n                {agent.currentTask?.progress}%\n              </div>\n              {/* Progress Bar */}\n              <div className=\"w-full h-2 bg-white/20 rounded-full mt-2 overflow-hidden\">\n                <div\n                  className=\"h-full rounded-full transition-all duration-300\"\n                  style={{\n                    width: `${agent.currentTask?.progress}%`,\n                    backgroundColor: agent.theme.glow,\n                  }}\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Queue Indicator */}\n          {queueCount > 0 && (\n            <div className=\"flex items-center gap-2 bg-black/60 backdrop-blur-sm rounded-full px-3 py-1.5 border border-white/10\">\n              <span className=\"text-white/80 text-sm\">Queue:</span>\n              <span\n                className=\"text-base font-bold\"\n                style={{ color: agent.theme.glow }}\n              >\n                {queueCount}\n              </span>\n              {agent.queue?.slice(0, 3).map((task, i) => (\n                <div\n                  key={task.id}\n                  className=\"w-2 h-2 rounded-full\"\n                  style={{\n                    backgroundColor:\n                      task.priority === 'high'\n                        ? '#ef4444'\n                        : task.priority === 'medium'\n                        ? '#f59e0b'\n                        : '#22c55e',\n                  }}\n                  title={task.title}\n                />\n              ))}\n              {queueCount > 3 && (\n                <span className=\"text-white/50 text-xs\">+{queueCount - 3}</span>\n              )}\n            </div>\n          )}\n\n          {/* Idle State */}\n          {!hasTask && queueCount === 0 && (\n            <div className=\"bg-black/60 backdrop-blur-sm rounded-full px-4 py-2 text-white/50 text-base\">\n              Awaiting orders\n            </div>\n          )}\n\n          {/* Agent Name */}\n          <div\n            className=\"mt-1 px-3 py-1 rounded text-base font-semibold text-white/90 bg-black/40 backdrop-blur-sm border border-white/10 whitespace-nowrap\"\n            style={{ textShadow: '0 2px 4px rgba(0,0,0,0.8)' }}\n          >\n            {agent.displayName}\n          </div>\n        </div>\n      </Html>\n    </group>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;;;AALA;;;;AAYA,MAAM,gBAAiD;IACrD,MAAM;IACN,SAAS;IACT,WAAW;IACX,OAAO;IACP,SAAS;AACX;AAEO,SAAS,eAAe,EAAE,KAAK,EAAuB;;IAC3D,MAAM,WAAW,IAAA,0MAAM,EAAc;IAErC,gCAAgC;IAChC,IAAA,iQAAQ;mCAAC,CAAC;YACR,IAAI,SAAS,OAAO,EAAE;gBACpB,MAAM,OAAO,MAAM,KAAK,CAAC,cAAc;gBACvC,SAAS,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,QAAQ,CAAC,SAAS,GAAG,MAAM,KAAK,GAAG,CAAC,OAAO,KAAK;YACtF;QACF;;IAEA,MAAM,cAAc,aAAa,CAAC,MAAM,MAAM,CAAC;IAC/C,MAAM,aAAa,MAAM,KAAK,EAAE,UAAU;IAC1C,MAAM,UAAU,CAAC,CAAC,MAAM,WAAW;IAEnC,qBACE,gOAAC;QACC,KAAK;QACL,UAAU;YAAC,MAAM,QAAQ,CAAC,CAAC;YAAE,MAAM,QAAQ,CAAC,SAAS,GAAG;YAAK,MAAM,QAAQ,CAAC,CAAC;SAAC;kBAE9E,cAAA,gOAAC,qMAAI;YACH,MAAM;YACN,gBAAgB;YAChB,OAAO;gBACL,eAAe;gBACf,YAAY;YACd;sBAEA,cAAA,gOAAC;gBAAI,WAAU;;kCAEb,gOAAC;wBACC,WAAU;wBACV,OAAO;4BACL,iBAAiB;4BACjB,WAAW,CAAC,SAAS,EAAE,aAAa;wBACtC;kCAEC,MAAM,MAAM;;;;;;oBAId,yBACC,gOAAC;wBAAI,WAAU;;0CACb,gOAAC;gCAAI,WAAU;0CACZ,MAAM,WAAW,EAAE;;;;;;0CAEtB,gOAAC;gCAAI,WAAU;;oCACZ,MAAM,WAAW,EAAE;oCAAS;;;;;;;0CAG/B,gOAAC;gCAAI,WAAU;0CACb,cAAA,gOAAC;oCACC,WAAU;oCACV,OAAO;wCACL,OAAO,GAAG,MAAM,WAAW,EAAE,SAAS,CAAC,CAAC;wCACxC,iBAAiB,MAAM,KAAK,CAAC,IAAI;oCACnC;;;;;;;;;;;;;;;;;oBAOP,aAAa,mBACZ,gOAAC;wBAAI,WAAU;;0CACb,gOAAC;gCAAK,WAAU;0CAAwB;;;;;;0CACxC,gOAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,OAAO,MAAM,KAAK,CAAC,IAAI;gCAAC;0CAEhC;;;;;;4BAEF,MAAM,KAAK,EAAE,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,kBACnC,gOAAC;oCAEC,WAAU;oCACV,OAAO;wCACL,iBACE,KAAK,QAAQ,KAAK,SACd,YACA,KAAK,QAAQ,KAAK,WAClB,YACA;oCACR;oCACA,OAAO,KAAK,KAAK;mCAVZ,KAAK,EAAE;;;;;4BAaf,aAAa,mBACZ,gOAAC;gCAAK,WAAU;;oCAAwB;oCAAE,aAAa;;;;;;;;;;;;;oBAM5D,CAAC,WAAW,eAAe,mBAC1B,gOAAC;wBAAI,WAAU;kCAA8E;;;;;;kCAM/F,gOAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,YAAY;wBAA4B;kCAEhD,MAAM,WAAW;;;;;;;;;;;;;;;;;;;;;;AAM9B;GA/GgB;;QAId,iQAAQ;;;KAJM"}},
    {"offset": {"line": 1802, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/agents/Agent.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Agent as AgentType } from '@/app/types/agents';\nimport { AgentMesh } from './AgentMesh';\nimport { AgentCamp } from './AgentCamp';\nimport { StatusIndicator } from './StatusIndicator';\nimport { AgentTaskLabel } from './AgentTaskLabel';\n\ninterface AgentProps {\n  agent: AgentType;\n  isSelected: boolean;\n  onSelect: (agent: AgentType) => void;\n}\n\nexport function Agent({ agent, isSelected, onSelect }: AgentProps) {\n  const [isHovered, setIsHovered] = useState(false);\n\n  return (\n    <group\n      onClick={(e) => {\n        e.stopPropagation();\n        onSelect(agent);\n      }}\n      onPointerOver={(e) => {\n        e.stopPropagation();\n        setIsHovered(true);\n        document.body.style.cursor = 'pointer';\n      }}\n      onPointerOut={() => {\n        setIsHovered(false);\n        document.body.style.cursor = 'auto';\n      }}\n    >\n      {/* Camp environment */}\n      <AgentCamp agent={agent} />\n\n      {/* Agent character */}\n      <AgentMesh\n        agent={agent}\n        isSelected={isSelected}\n        isHovered={isHovered}\n      />\n\n      {/* Status indicator */}\n      <StatusIndicator\n        status={agent.status}\n        position={{\n          x: agent.position.x,\n          y: agent.position.elevation,\n          z: agent.position.z,\n        }}\n      />\n\n      {/* Task and Queue Label */}\n      <AgentTaskLabel agent={agent} />\n    </group>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;;;AAPA;;;;;;AAeO,SAAS,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAc;;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,4MAAQ,EAAC;IAE3C,qBACE,gOAAC;QACC,SAAS,CAAC;YACR,EAAE,eAAe;YACjB,SAAS;QACX;QACA,eAAe,CAAC;YACd,EAAE,eAAe;YACjB,aAAa;YACb,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;QAC/B;QACA,cAAc;YACZ,aAAa;YACb,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;QAC/B;;0BAGA,gOAAC,4LAAS;gBAAC,OAAO;;;;;;0BAGlB,gOAAC,4LAAS;gBACR,OAAO;gBACP,YAAY;gBACZ,WAAW;;;;;;0BAIb,gOAAC,wMAAe;gBACd,QAAQ,MAAM,MAAM;gBACpB,UAAU;oBACR,GAAG,MAAM,QAAQ,CAAC,CAAC;oBACnB,GAAG,MAAM,QAAQ,CAAC,SAAS;oBAC3B,GAAG,MAAM,QAAQ,CAAC,CAAC;gBACrB;;;;;;0BAIF,gOAAC,sMAAc;gBAAC,OAAO;;;;;;;;;;;;AAG7B;GA3CgB;KAAA"}},
    {"offset": {"line": 1891, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/agents/AgentsLayer.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { Agent } from '@/app/types/agents';\nimport { Agent as AgentComponent } from './Agent';\n\ninterface AgentsLayerProps {\n  agents: Agent[];\n  selectedAgentId: string | null;\n  onSelectAgent: (agent: Agent) => void;\n}\n\nexport function AgentsLayer({ agents, selectedAgentId, onSelectAgent }: AgentsLayerProps) {\n  // Sort agents by z-position for proper rendering order\n  const sortedAgents = useMemo(() => {\n    return [...agents].sort((a, b) => a.position.z - b.position.z);\n  }, [agents]);\n\n  return (\n    <group>\n      {sortedAgents.map((agent) => (\n        <AgentComponent\n          key={agent.id}\n          agent={agent}\n          isSelected={selectedAgentId === agent.id}\n          onSelect={onSelectAgent}\n        />\n      ))}\n    </group>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;;;AAJA;;;AAYO,SAAS,YAAY,EAAE,MAAM,EAAE,eAAe,EAAE,aAAa,EAAoB;;IACtF,uDAAuD;IACvD,MAAM,eAAe,IAAA,2MAAO;6CAAC;YAC3B,OAAO;mBAAI;aAAO,CAAC,IAAI;qDAAC,CAAC,GAAG,IAAM,EAAE,QAAQ,CAAC,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;;QAC/D;4CAAG;QAAC;KAAO;IAEX,qBACE,gOAAC;kBACE,aAAa,GAAG,CAAC,CAAC,sBACjB,gOAAC,oLAAc;gBAEb,OAAO;gBACP,YAAY,oBAAoB,MAAM,EAAE;gBACxC,UAAU;eAHL,MAAM,EAAE;;;;;;;;;;AAQvB;GAlBgB;KAAA"}},
    {"offset": {"line": 1944, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/lib/agents.ts"],"sourcesContent":["import { Agent } from '@/app/types/agents';\n\n// Convert lat/lng to 3D world coordinates\n// Mongol Empire bounds at its height (1279): 22°E to 135°E, 22°N to 55°N\nconst MAP_BOUNDS = {\n  minLat: 22,\n  maxLat: 55,\n  minLng: 22,\n  maxLng: 135,\n};\n\nexport function latLngToWorld(lat: number, lng: number): { x: number; z: number } {\n  const x = ((lng - MAP_BOUNDS.minLng) / (MAP_BOUNDS.maxLng - MAP_BOUNDS.minLng)) * 120 - 60;\n  const z = ((lat - MAP_BOUNDS.minLat) / (MAP_BOUNDS.maxLat - MAP_BOUNDS.minLat)) * -70 + 35;\n  return { x, z };\n}\n\nexport function getElevation(lat: number, lng: number): number {\n  // Flat elevation - very minimal variation for the new flat terrain\n  return 0.5;\n}\n\nexport const AGENTS: Agent[] = [\n  {\n    id: 'temujin',\n    name: 'Temujin',\n    role: 'developer',\n    displayName: 'Temujin (Genghis Khan)',\n    description: 'Founder of the Mongol Empire and the Developer agent - building the foundation',\n    historicalCapital: 'Karakorum',\n    historicalContext: 'Established Karakorum as the supply base in 1220. The original capital of the Mongol Empire.',\n    coordinates: { lat: 47.2, lng: 102.5 },\n    position: { ...latLngToWorld(47.2, 102.5), elevation: getElevation(47.2, 102.5) },\n    theme: {\n      primary: '#71717A',\n      secondary: '#DC2626',\n      glow: '#DC2626',\n    },\n    status: 'working',\n    currentTask: {\n      id: 'task-1',\n      title: 'Refactoring core architecture',\n      description: 'Optimizing the main codebase structure',\n      progress: 65,\n      startedAt: new Date(Date.now() - 2 * 60 * 60 * 1000),\n      estimatedCompletion: new Date(Date.now() + 1 * 60 * 60 * 1000),\n    },\n    queue: [\n      { id: 'q1', title: 'Security audit', priority: 'high', estimatedDuration: 120 },\n      { id: 'q2', title: 'API optimization', priority: 'medium', estimatedDuration: 90 },\n      { id: 'q3', title: 'Database migration', priority: 'high', estimatedDuration: 180 },\n    ],\n    metrics: {\n      tasksCompleted: 12,\n      itemsProduced: 8,\n      activeTimeMinutes: 340,\n      lastActiveAt: new Date(),\n    },\n    camp: {\n      type: 'forge',\n      description: 'A warrior\\'s workshop with tools and armor',\n      props: ['anvil', 'weapons', 'banners'],\n    },\n  },\n  {\n    id: 'ogedei',\n    name: 'Ogedei',\n    role: 'writer',\n    displayName: 'Ögedei Khan',\n    description: 'Second Great Khan and the Writer agent - crafting content and documentation',\n    historicalCapital: 'Samarkand',\n    historicalContext: 'While he ruled from Karakorum, Samarkand represents his expansion into Central Asia and the Silk Road.',\n    coordinates: { lat: 39.6, lng: 66.9 },\n    position: { ...latLngToWorld(39.6, 66.9), elevation: getElevation(39.6, 66.9) },\n    theme: {\n      primary: '#228B22',\n      secondary: '#8B4513',\n      glow: '#228B22',\n    },\n    status: 'working',\n    currentTask: {\n      id: 'task-2',\n      title: 'Writing documentation',\n      description: 'Creating API reference docs',\n      progress: 40,\n      startedAt: new Date(Date.now() - 1 * 60 * 60 * 1000),\n      estimatedCompletion: new Date(Date.now() + 2 * 60 * 60 * 1000),\n    },\n    queue: [\n      { id: 'q4', title: 'Blog post draft', priority: 'medium', estimatedDuration: 60 },\n      { id: 'q5', title: 'User guide update', priority: 'high', estimatedDuration: 120 },\n    ],\n    metrics: {\n      tasksCompleted: 8,\n      itemsProduced: 15,\n      activeTimeMinutes: 280,\n      lastActiveAt: new Date(),\n    },\n    camp: {\n      type: 'caravanserai',\n      description: 'A bustling Silk Road trading post with scrolls and maps',\n      props: ['scrolls', 'maps', 'trading goods'],\n    },\n  },\n  {\n    id: 'mongke',\n    name: 'Mongke',\n    role: 'researcher',\n    displayName: 'Möngke Khan',\n    description: 'Fourth Great Khan and the Researcher agent - gathering intelligence and knowledge',\n    historicalCapital: 'Bukhara',\n    historicalContext: 'Bukhara was a center of Islamic learning. Mongke conducted empire-wide censuses and sent expeditions to gather knowledge.',\n    coordinates: { lat: 39.8, lng: 64.4 },\n    position: { ...latLngToWorld(39.8, 64.4), elevation: getElevation(39.8, 64.4) },\n    theme: {\n      primary: '#1E40AF',\n      secondary: '#C0C0C0',\n      glow: '#1E40AF',\n    },\n    status: 'reviewing',\n    currentTask: {\n      id: 'task-3',\n      title: 'Market analysis report',\n      description: 'Analyzing competitor strategies',\n      progress: 85,\n      startedAt: new Date(Date.now() - 3 * 60 * 60 * 1000),\n      estimatedCompletion: new Date(Date.now() + 30 * 60 * 1000),\n    },\n    queue: [\n      { id: 'q6', title: 'User research study', priority: 'high', estimatedDuration: 240 },\n      { id: 'q7', title: 'Data collection', priority: 'medium', estimatedDuration: 90 },\n      { id: 'q8', title: 'Trend analysis', priority: 'low', estimatedDuration: 120 },\n    ],\n    metrics: {\n      tasksCompleted: 6,\n      itemsProduced: 4,\n      activeTimeMinutes: 420,\n      lastActiveAt: new Date(),\n    },\n    camp: {\n      type: 'observatory',\n      description: 'A scholarly retreat with astronomical instruments and manuscripts',\n      props: ['telescope', 'books', 'astrolabe'],\n    },\n  },\n  {\n    id: 'kublai',\n    name: 'Kublai',\n    role: 'coordinator',\n    displayName: 'Kublai Khan',\n    description: 'First Yuan Emperor and the Coordinator agent - orchestrating the empire',\n    historicalCapital: 'Shangdu (Xanadu)',\n    historicalContext: 'Founded Shangdu (Xanadu) in 1256 as his summer capital before moving to Dadu (Beijing).',\n    coordinates: { lat: 42.3, lng: 116.2 },\n    position: { ...latLngToWorld(42.3, 116.2), elevation: getElevation(42.3, 116.2) },\n    theme: {\n      primary: '#FFD700',\n      secondary: '#1E3A8A',\n      glow: '#FFD700',\n    },\n    status: 'working',\n    currentTask: {\n      id: 'task-4',\n      title: 'Strategic planning',\n      description: 'Coordinating cross-team initiatives',\n      progress: 25,\n      startedAt: new Date(Date.now() - 30 * 60 * 1000),\n      estimatedCompletion: new Date(Date.now() + 3 * 60 * 60 * 1000),\n    },\n    queue: [\n      { id: 'q9', title: 'Review PRs', priority: 'high', estimatedDuration: 60 },\n      { id: 'q10', title: 'Team sync', priority: 'medium', estimatedDuration: 30 },\n      { id: 'q11', title: 'Q1 roadmap', priority: 'high', estimatedDuration: 180 },\n    ],\n    metrics: {\n      tasksCompleted: 20,\n      itemsProduced: 12,\n      activeTimeMinutes: 380,\n      lastActiveAt: new Date(),\n    },\n    camp: {\n      type: 'palace',\n      description: 'An imperial palace with gardens and administrative halls',\n      props: ['throne', 'banners', 'imperial seals'],\n    },\n  },\n  {\n    id: 'chagatai',\n    name: 'Chagatai',\n    role: 'operations',\n    displayName: 'Chagatai Khan',\n    description: 'Founder of the Chagatai Khanate and the Operations agent - managing logistics',\n    historicalCapital: 'Almaliq',\n    historicalContext: 'Almaliq in the Ili River Valley was a key city in the Chagatai Khanate, controlling the northern Silk Road.',\n    coordinates: { lat: 44.0, lng: 78.5 },\n    position: { ...latLngToWorld(44.0, 78.5), elevation: getElevation(44.0, 78.5) },\n    theme: {\n      primary: '#EA580C',\n      secondary: '#CD7F32',\n      glow: '#EA580C',\n    },\n    status: 'working',\n    currentTask: {\n      id: 'task-5',\n      title: 'Infrastructure scaling',\n      description: 'Setting up new server instances',\n      progress: 55,\n      startedAt: new Date(Date.now() - 4 * 60 * 60 * 1000),\n      estimatedCompletion: new Date(Date.now() + 2 * 60 * 60 * 1000),\n    },\n    queue: [\n      { id: 'q12', title: 'CI/CD pipeline update', priority: 'high', estimatedDuration: 90 },\n      { id: 'q13', title: 'Monitoring setup', priority: 'medium', estimatedDuration: 60 },\n    ],\n    metrics: {\n      tasksCompleted: 15,\n      itemsProduced: 6,\n      activeTimeMinutes: 460,\n      lastActiveAt: new Date(),\n    },\n    camp: {\n      type: 'caravanserai',\n      description: 'A fortified waystation on the Silk Road',\n      props: ['horses', 'supplies', 'route maps'],\n    },\n  },\n  {\n    id: 'jochi',\n    name: 'Jochi',\n    role: 'analyst',\n    displayName: 'Jochi Khan',\n    description: 'Eldest son of Genghis Khan and the Analyst agent - tracking metrics and intelligence',\n    historicalCapital: 'Sarai Batu',\n    historicalContext: 'Sarai Batu on the lower Volga was the capital of the Golden Horde, controlling trade and tribute from Russia.',\n    coordinates: { lat: 48.5, lng: 45.0 },\n    position: { ...latLngToWorld(48.5, 45.0), elevation: getElevation(48.5, 45.0) },\n    theme: {\n      primary: '#7C3AED',\n      secondary: '#F59E0B',\n      glow: '#7C3AED',\n    },\n    status: 'idle',\n    queue: [\n      { id: 'q14', title: 'Performance metrics', priority: 'high', estimatedDuration: 120 },\n      { id: 'q15', title: 'Revenue analysis', priority: 'high', estimatedDuration: 90 },\n      { id: 'q16', title: 'User behavior report', priority: 'medium', estimatedDuration: 150 },\n    ],\n    metrics: {\n      tasksCompleted: 10,\n      itemsProduced: 7,\n      activeTimeMinutes: 290,\n      lastActiveAt: new Date(Date.now() - 30 * 60 * 1000),\n    },\n    camp: {\n      type: 'counting-house',\n      description: 'A administrative center with tribute records and trade ledgers',\n      props: ['abacus', 'scrolls', 'tribute goods'],\n    },\n  },\n];\n\nexport function getAgentById(id: string): Agent | undefined {\n  return AGENTS.find(a => a.id === id);\n}\n\nexport function getAgentColor(role: Agent['role']): string {\n  const colors: Record<Agent['role'], string> = {\n    coordinator: '#FFD700',\n    researcher: '#1E40AF',\n    writer: '#228B22',\n    developer: '#DC2626',\n    analyst: '#7C3AED',\n    operations: '#EA580C',\n  };\n  return colors[role];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2375, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/stores/agentStore.ts"],"sourcesContent":["'use client';\n\nimport { create } from 'zustand';\nimport { Agent, Activity, Deliverable } from '@/app/types/agents';\nimport { AGENTS } from '@/app/lib/agents';\n\ninterface AgentState {\n  // Data\n  agents: Agent[];\n  activities: Activity[];\n  deliverables: Deliverable[];\n\n  // UI State\n  selectedAgentId: string | null;\n  isDetailPanelOpen: boolean;\n\n  // Actions\n  setAgents: (agents: Agent[]) => void;\n  updateAgent: (agentId: string, updates: Partial<Agent>) => void;\n  updateAgentStatus: (agentId: string, status: Agent['status']) => void;\n  updateAgentTask: (agentId: string, task: Agent['currentTask']) => void;\n  addActivity: (activity: Activity) => void;\n  addDeliverable: (deliverable: Deliverable) => void;\n  selectAgent: (agentId: string | null) => void;\n  toggleDetailPanel: (open?: boolean) => void;\n\n  // Derived\n  getSelectedAgent: () => Agent | undefined;\n  getAgentActivities: (agentId: string) => Activity[];\n  getAgentDeliverables: (agentId: string) => Deliverable[];\n}\n\nexport const useAgentStore = create<AgentState>((set, get) => ({\n  // Initial data\n  agents: AGENTS,\n  activities: [],\n  deliverables: [],\n  selectedAgentId: null,\n  isDetailPanelOpen: false,\n\n  // Actions\n  setAgents: (agents) => set({ agents }),\n\n  updateAgent: (agentId, updates) =>\n    set((state) => ({\n      agents: state.agents.map((agent) =>\n        agent.id === agentId ? { ...agent, ...updates } : agent\n      ),\n    })),\n\n  updateAgentStatus: (agentId, status) =>\n    set((state) => ({\n      agents: state.agents.map((agent) =>\n        agent.id === agentId\n          ? { ...agent, status, metrics: { ...agent.metrics, lastActiveAt: new Date() } }\n          : agent\n      ),\n    })),\n\n  updateAgentTask: (agentId, task) =>\n    set((state) => ({\n      agents: state.agents.map((agent) =>\n        agent.id === agentId ? { ...agent, currentTask: task } : agent\n      ),\n    })),\n\n  addActivity: (activity) =>\n    set((state) => ({\n      activities: [activity, ...state.activities].slice(0, 100), // Keep last 100\n    })),\n\n  addDeliverable: (deliverable) =>\n    set((state) => ({\n      deliverables: [deliverable, ...state.deliverables],\n    })),\n\n  selectAgent: (agentId) =>\n    set({\n      selectedAgentId: agentId,\n      isDetailPanelOpen: agentId !== null,\n    }),\n\n  toggleDetailPanel: (open) =>\n    set((state) => ({\n      isDetailPanelOpen: open ?? !state.isDetailPanelOpen,\n    })),\n\n  // Derived getters\n  getSelectedAgent: () => {\n    const { agents, selectedAgentId } = get();\n    return agents.find((a) => a.id === selectedAgentId);\n  },\n\n  getAgentActivities: (agentId) => {\n    return get().activities.filter((a) => a.agentId === agentId);\n  },\n\n  getAgentDeliverables: (agentId) => {\n    return get().deliverables.filter((d) => d.agentId === agentId);\n  },\n}));\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAJA;;;AAgCO,MAAM,gBAAgB,IAAA,wLAAM,EAAa,CAAC,KAAK,MAAQ,CAAC;QAC7D,eAAe;QACf,QAAQ,oKAAM;QACd,YAAY,EAAE;QACd,cAAc,EAAE;QAChB,iBAAiB;QACjB,mBAAmB;QAEnB,UAAU;QACV,WAAW,CAAC,SAAW,IAAI;gBAAE;YAAO;QAEpC,aAAa,CAAC,SAAS,UACrB,IAAI,CAAC,QAAU,CAAC;oBACd,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,EAAE,KAAK,UAAU;4BAAE,GAAG,KAAK;4BAAE,GAAG,OAAO;wBAAC,IAAI;gBAEtD,CAAC;QAEH,mBAAmB,CAAC,SAAS,SAC3B,IAAI,CAAC,QAAU,CAAC;oBACd,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,EAAE,KAAK,UACT;4BAAE,GAAG,KAAK;4BAAE;4BAAQ,SAAS;gCAAE,GAAG,MAAM,OAAO;gCAAE,cAAc,IAAI;4BAAO;wBAAE,IAC5E;gBAER,CAAC;QAEH,iBAAiB,CAAC,SAAS,OACzB,IAAI,CAAC,QAAU,CAAC;oBACd,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,QACxB,MAAM,EAAE,KAAK,UAAU;4BAAE,GAAG,KAAK;4BAAE,aAAa;wBAAK,IAAI;gBAE7D,CAAC;QAEH,aAAa,CAAC,WACZ,IAAI,CAAC,QAAU,CAAC;oBACd,YAAY;wBAAC;2BAAa,MAAM,UAAU;qBAAC,CAAC,KAAK,CAAC,GAAG;gBACvD,CAAC;QAEH,gBAAgB,CAAC,cACf,IAAI,CAAC,QAAU,CAAC;oBACd,cAAc;wBAAC;2BAAgB,MAAM,YAAY;qBAAC;gBACpD,CAAC;QAEH,aAAa,CAAC,UACZ,IAAI;gBACF,iBAAiB;gBACjB,mBAAmB,YAAY;YACjC;QAEF,mBAAmB,CAAC,OAClB,IAAI,CAAC,QAAU,CAAC;oBACd,mBAAmB,QAAQ,CAAC,MAAM,iBAAiB;gBACrD,CAAC;QAEH,kBAAkB;QAClB,kBAAkB;YAChB,MAAM,EAAE,MAAM,EAAE,eAAe,EAAE,GAAG;YACpC,OAAO,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACrC;QAEA,oBAAoB,CAAC;YACnB,OAAO,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK;QACtD;QAEA,sBAAsB,CAAC;YACrB,OAAO,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK;QACxD;IACF,CAAC"}},
    {"offset": {"line": 2455, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/scene/SteppeScene.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { Canvas, useFrame, useThree } from '@react-three/fiber';\nimport { OrbitControls, PerspectiveCamera } from '@react-three/drei';\nimport { EmpireTerrain } from './EmpireTerrain';\nimport { Rivers } from './Rivers';\nimport { SkyEnvironment } from './SkyEnvironment';\nimport { AgentsLayer } from '../agents/AgentsLayer';\nimport { useAgentStore } from '@/app/stores/agentStore';\nimport { Agent } from '@/app/types/agents';\nimport * as THREE from 'three';\n\n// Touch and keyboard controls\nfunction TouchAndKeyControls({ target, setTarget }: { target: [number, number, number] | null; setTarget: (t: [number, number, number] | null) => void }) {\n  const { camera, gl } = useThree();\n  const keysPressed = useRef<Set<string>>(new Set());\n  const moveSpeed = 1.2;\n\n  // Touch state\n  const touchesRef = useRef<Touch[]>([]);\n  const lastTouchDistanceRef = useRef<number>(0);\n  const lastTouchCenterRef = useRef<{ x: number; y: number }>({ x: 0, y: 0 });\n\n  useEffect(() => {\n    const canvas = gl.domElement;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      keysPressed.current.add(e.key.toLowerCase());\n    };\n\n    const handleKeyUp = (e: KeyboardEvent) => {\n      keysPressed.current.delete(e.key.toLowerCase());\n    };\n\n    // Touch event handlers\n    const handleTouchStart = (e: TouchEvent) => {\n      e.preventDefault();\n      touchesRef.current = Array.from(e.touches);\n\n      if (touchesRef.current.length === 2) {\n        // Two finger touch - prepare for pan\n        const touch1 = touchesRef.current[0];\n        const touch2 = touchesRef.current[1];\n        lastTouchDistanceRef.current = Math.hypot(\n          touch2.clientX - touch1.clientX,\n          touch2.clientY - touch1.clientY\n        );\n        lastTouchCenterRef.current = {\n          x: (touch1.clientX + touch2.clientX) / 2,\n          y: (touch1.clientY + touch2.clientY) / 2,\n        };\n      }\n    };\n\n    const handleTouchMove = (e: TouchEvent) => {\n      e.preventDefault();\n      const touches = Array.from(e.touches);\n\n      if (touches.length === 2 && touchesRef.current.length === 2) {\n        // Two finger pan\n        const touch1 = touches[0];\n        const touch2 = touches[1];\n\n        const centerX = (touch1.clientX + touch2.clientX) / 2;\n        const centerY = (touch1.clientY + touch2.clientY) / 2;\n\n        const deltaX = centerX - lastTouchCenterRef.current.x;\n        const deltaY = centerY - lastTouchCenterRef.current.y;\n\n        // Pan speed for touch\n        const panSpeed = 0.5;\n        const currentTarget = target || [0, 0, 0];\n\n        // Calculate camera right and forward vectors\n        const right = new THREE.Vector3(1, 0, 0).applyQuaternion(camera.quaternion);\n        right.y = 0;\n        right.normalize();\n\n        const forward = new THREE.Vector3(0, 0, -1).applyQuaternion(camera.quaternion);\n        forward.y = 0;\n        forward.normalize();\n\n        // Move camera and target (opposite direction of finger movement for natural feel)\n        const moveX = -right.x * deltaX * panSpeed - forward.x * deltaY * panSpeed;\n        const moveZ = -right.z * deltaX * panSpeed - forward.z * deltaY * panSpeed;\n\n        camera.position.x += moveX;\n        camera.position.z += moveZ;\n        setTarget([\n          currentTarget[0] + moveX,\n          currentTarget[1],\n          currentTarget[2] + moveZ\n        ]);\n\n        // Update for next frame\n        lastTouchCenterRef.current = { x: centerX, y: centerY };\n\n        // Pinch zoom\n        const distance = Math.hypot(\n          touch2.clientX - touch1.clientX,\n          touch2.clientY - touch1.clientY\n        );\n        const distanceDelta = lastTouchDistanceRef.current - distance;\n        const zoomSpeed = 0.1;\n\n        // Move camera along look direction for zoom\n        const lookDirection = new THREE.Vector3().subVectors(\n          new THREE.Vector3(...(target || [0, 0, 0])),\n          camera.position\n        ).normalize();\n\n        camera.position.addScaledVector(lookDirection, distanceDelta * zoomSpeed);\n\n        lastTouchDistanceRef.current = distance;\n      }\n    };\n\n    const handleTouchEnd = (e: TouchEvent) => {\n      e.preventDefault();\n      touchesRef.current = Array.from(e.touches);\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    canvas.addEventListener('touchstart', handleTouchStart, { passive: false });\n    canvas.addEventListener('touchmove', handleTouchMove, { passive: false });\n    canvas.addEventListener('touchend', handleTouchEnd, { passive: false });\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      canvas.removeEventListener('touchstart', handleTouchStart);\n      canvas.removeEventListener('touchmove', handleTouchMove);\n      canvas.removeEventListener('touchend', handleTouchEnd);\n    };\n  }, [camera, gl, target, setTarget]);\n\n  // WASD keyboard movement - moves camera forward/back/left/right\n  useFrame(() => {\n    const keys = keysPressed.current;\n    if (keys.size === 0) return;\n\n    const forward = new THREE.Vector3(0, 0, -1).applyQuaternion(camera.quaternion);\n    forward.y = 0;\n    forward.normalize();\n\n    const right = new THREE.Vector3(1, 0, 0).applyQuaternion(camera.quaternion);\n    right.y = 0;\n    right.normalize();\n\n    const movement = new THREE.Vector3();\n\n    if (keys.has('w') || keys.has('arrowup')) movement.add(forward);\n    if (keys.has('s') || keys.has('arrowdown')) movement.sub(forward);\n    if (keys.has('a') || keys.has('arrowleft')) movement.sub(right);\n    if (keys.has('d') || keys.has('arrowright')) movement.add(right);\n\n    if (movement.length() > 0) {\n      movement.normalize().multiplyScalar(moveSpeed);\n      // Move both camera and target together to maintain orbit relationship\n      camera.position.x += movement.x;\n      camera.position.z += movement.z;\n      const currentTarget = target || [0, 0, 0];\n      setTarget([\n        currentTarget[0] + movement.x,\n        currentTarget[1],\n        currentTarget[2] + movement.z\n      ]);\n    }\n  });\n\n  return null;\n}\n\nexport function SteppeScene() {\n  const { agents, selectedAgentId, selectAgent } = useAgentStore();\n  const [cameraTarget, setCameraTarget] = useState<[number, number, number] | null>(null);\n\n  const handleSelectAgent = useCallback((agent: Agent) => {\n    selectAgent(agent.id);\n    setCameraTarget([agent.position.x, agent.position.elevation + 5, agent.position.z]);\n  }, [selectAgent]);\n\n  const handleBackgroundClick = useCallback(() => {\n    selectAgent(null);\n    setCameraTarget(null);\n  }, [selectAgent]);\n\n  return (\n    <div className=\"w-full h-full\" onClick={handleBackgroundClick}>\n      <Canvas shadows>\n        <PerspectiveCamera\n          makeDefault\n          position={[0, 80, 20]}\n          fov={25}\n          near={0.1}\n          far={1000}\n        />\n\n        <TouchAndKeyControls target={cameraTarget} setTarget={setCameraTarget} />\n\n        <OrbitControls\n          enablePan={false}\n          enableZoom={false}  // We handle zoom via touch pinch and scroll\n          enableRotate={true}\n          minDistance={30}\n          maxDistance={120}\n          minPolarAngle={0}\n          maxPolarAngle={Math.PI / 2.5}\n          target={cameraTarget || [0, 0, 0]}\n          mouseButtons={{\n            LEFT: THREE.MOUSE.ROTATE,  // Click and hold to orbit/pivot\n            MIDDLE: undefined,\n            RIGHT: undefined\n          }}\n          touches={{\n            ONE: THREE.TOUCH.ROTATE    // One finger = orbit/pivot\n            // Two fingers handled by custom pan/zoom\n          }}\n          reverseOrbit\n          reverseHorizontalOrbit\n        />\n\n        <SkyEnvironment />\n\n        {/* Main terrain - Mongol Empire shape */}\n        <EmpireTerrain segments={150} />\n\n        {/* Rivers */}\n        <Rivers />\n\n        {/* Agents */}\n        <AgentsLayer\n          agents={agents}\n          selectedAgentId={selectedAgentId}\n          onSelectAgent={handleSelectAgent}\n        />\n      </Canvas>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2794, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,4MAAO,EAAC,IAAA,mLAAI,EAAC;AACtB"}},
    {"offset": {"line": 2812, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { Slot } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        xs: \"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,6MAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,8OAAI,CAAC,IAAI,GAAG;IAEnC,qBACE,gOAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,wJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KArBS"}},
    {"offset": {"line": 2881, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/ui/Header.tsx"],"sourcesContent":["'use client';\n\nimport { Map, Settings, HelpCircle, LayoutGrid } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport Link from 'next/link';\n\ninterface HeaderProps {\n  onToggleMap?: () => void;\n  onToggleSettings?: () => void;\n  onToggleHelp?: () => void;\n}\n\nexport function Header({ onToggleMap, onToggleSettings, onToggleHelp }: HeaderProps) {\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 bg-gradient-to-b from-black/60 to-transparent\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/20\">\n          <Map className=\"w-5 h-5 text-white\" />\n        </div>\n        <div>\n          <h1 className=\"text-xl font-bold text-white tracking-tight\">\n            Mongol Empire Command\n          </h1>\n          <p className=\"text-sm text-white/60\">\n            AI Agent Visualization • 6 Khans • Real-time Activity\n          </p>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-2\">\n        <Link href=\"/mission-control\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"text-white/70 hover:text-white hover:bg-white/10\"\n            title=\"Mission Control\"\n          >\n            <LayoutGrid className=\"w-5 h-5\" />\n          </Button>\n        </Link>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onToggleMap}\n          className=\"text-white/70 hover:text-white hover:bg-white/10\"\n        >\n          <Map className=\"w-5 h-5\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onToggleSettings}\n          className=\"text-white/70 hover:text-white hover:bg-white/10\"\n        >\n          <Settings className=\"w-5 h-5\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onToggleHelp}\n          className=\"text-white/70 hover:text-white hover:bg-white/10\"\n        >\n          <HelpCircle className=\"w-5 h-5\" />\n        </Button>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAYO,SAAS,OAAO,EAAE,WAAW,EAAE,gBAAgB,EAAE,YAAY,EAAe;IACjF,qBACE,gOAAC;QAAO,WAAU;;0BAChB,gOAAC;gBAAI,WAAU;;kCACb,gOAAC;wBAAI,WAAU;kCACb,cAAA,gOAAC,6OAAG;4BAAC,WAAU;;;;;;;;;;;kCAEjB,gOAAC;;0CACC,gOAAC;gCAAG,WAAU;0CAA8C;;;;;;0CAG5D,gOAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;0BAMzC,gOAAC;gBAAI,WAAU;;kCACb,gOAAC,6MAAI;wBAAC,MAAK;kCACT,cAAA,gOAAC,2KAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,WAAU;4BACV,OAAM;sCAEN,cAAA,gOAAC,sQAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAG1B,gOAAC,2KAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;kCAEV,cAAA,gOAAC,6OAAG;4BAAC,WAAU;;;;;;;;;;;kCAEjB,gOAAC,2KAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;kCAEV,cAAA,gOAAC,4PAAQ;4BAAC,WAAU;;;;;;;;;;;kCAEtB,gOAAC,2KAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,WAAU;kCAEV,cAAA,gOAAC,kRAAU;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKhC;KAvDgB"}},
    {"offset": {"line": 3049, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/ui/MiniMap.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { Agent } from '@/app/types/agents';\nimport { cn } from '@/lib/utils';\n\ninterface MiniMapProps {\n  agents: Agent[];\n  selectedAgentId: string | null;\n  onSelectAgent: (agentId: string) => void;\n}\n\n// Map bounds for conversion\nconst MAP_BOUNDS = {\n  minLat: 35,\n  maxLat: 55,\n  minLng: 20,\n  maxLng: 130,\n};\n\nfunction latLngToMiniMap(lat: number, lng: number): { x: number; y: number } {\n  const x = ((lng - MAP_BOUNDS.minLng) / (MAP_BOUNDS.maxLng - MAP_BOUNDS.minLng)) * 100;\n  const y = ((lat - MAP_BOUNDS.minLat) / (MAP_BOUNDS.maxLat - MAP_BOUNDS.minLat)) * 100;\n  return { x, y: 100 - y }; // Invert Y so north is up\n}\n\nexport function MiniMap({ agents, selectedAgentId, onSelectAgent }: MiniMapProps) {\n  const agentPositions = useMemo(() => {\n    return agents.map((agent) => ({\n      ...agent,\n      miniMapPos: latLngToMiniMap(agent.coordinates.lat, agent.coordinates.lng),\n    }));\n  }, [agents]);\n\n  return (\n    <div className=\"fixed bottom-6 left-6 z-40 w-72 h-56 bg-black/80 backdrop-blur-sm rounded-xl border border-white/10 shadow-2xl overflow-hidden\">\n      <div className=\"absolute top-3 left-3 text-sm font-semibold text-white/80\">\n        Empire Map\n      </div>\n\n      {/* Map background - simplified terrain */}\n      <div className=\"absolute inset-0 mt-8 mb-2 mx-2 rounded-lg bg-gradient-to-br from-[#4a6741] via-[#5c4a3d] to-[#8b7355]\">\n        {/* Mountain ranges */}\n        <div className=\"absolute top-[20%] left-[10%] w-[15%] h-[20%] bg-[#6b5b4f] rounded-full opacity-50 blur-sm\" />\n        <div className=\"absolute top-[40%] left-[25%] w-[12%] h-[15%] bg-[#6b5b4f] rounded-full opacity-50 blur-sm\" />\n\n        {/* Rivers */}\n        <svg className=\"absolute inset-0 w-full h-full\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\">\n          {/* Volga */}\n          <path d=\"M 25 15 Q 23 25 25 35\" stroke=\"#1e3a5f\" strokeWidth=\"1.5\" fill=\"none\" opacity=\"0.6\" />\n          {/* Orkhon */}\n          <path d=\"M 75 35 Q 73 40 76 45\" stroke=\"#1e3a5f\" strokeWidth=\"1.5\" fill=\"none\" opacity=\"0.6\" />\n          {/* Ili */}\n          <path d=\"M 60 45 Q 62 50 64 52\" stroke=\"#1e3a5f\" strokeWidth=\"1.5\" fill=\"none\" opacity=\"0.6\" />\n        </svg>\n\n        {/* Agent markers */}\n        {agentPositions.map((agent) => (\n          <button\n            key={agent.id}\n            onClick={() => onSelectAgent(agent.id)}\n            className={cn(\n              \"absolute w-4 h-4 -ml-2 -mt-2 rounded-full border-2 transition-all duration-200\",\n              selectedAgentId === agent.id\n                ? \"scale-150 border-white shadow-lg shadow-white/50\"\n                : \"scale-100 border-white/50 hover:scale-125\"\n            )}\n            style={{\n              left: `${agent.miniMapPos.x}%`,\n              top: `${agent.miniMapPos.y}%`,\n              backgroundColor: agent.theme.primary,\n            }}\n            title={`${agent.displayName} - ${agent.historicalCapital}`}\n          />\n        ))}\n      </div>\n\n      {/* Legend */}\n      <div className=\"absolute bottom-2 right-2 flex flex-col gap-1 text-xs text-white/60\">\n        <span>★ Capital</span>\n        <span>═ River</span>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;;;AAJA;;;AAYA,4BAA4B;AAC5B,MAAM,aAAa;IACjB,QAAQ;IACR,QAAQ;IACR,QAAQ;IACR,QAAQ;AACV;AAEA,SAAS,gBAAgB,GAAW,EAAE,GAAW;IAC/C,MAAM,IAAI,AAAC,CAAC,MAAM,WAAW,MAAM,IAAI,CAAC,WAAW,MAAM,GAAG,WAAW,MAAM,IAAK;IAClF,MAAM,IAAI,AAAC,CAAC,MAAM,WAAW,MAAM,IAAI,CAAC,WAAW,MAAM,GAAG,WAAW,MAAM,IAAK;IAClF,OAAO;QAAE;QAAG,GAAG,MAAM;IAAE,GAAG,0BAA0B;AACtD;AAEO,SAAS,QAAQ,EAAE,MAAM,EAAE,eAAe,EAAE,aAAa,EAAgB;;IAC9E,MAAM,iBAAiB,IAAA,2MAAO;2CAAC;YAC7B,OAAO,OAAO,GAAG;mDAAC,CAAC,QAAU,CAAC;wBAC5B,GAAG,KAAK;wBACR,YAAY,gBAAgB,MAAM,WAAW,CAAC,GAAG,EAAE,MAAM,WAAW,CAAC,GAAG;oBAC1E,CAAC;;QACH;0CAAG;QAAC;KAAO;IAEX,qBACE,gOAAC;QAAI,WAAU;;0BACb,gOAAC;gBAAI,WAAU;0BAA4D;;;;;;0BAK3E,gOAAC;gBAAI,WAAU;;kCAEb,gOAAC;wBAAI,WAAU;;;;;;kCACf,gOAAC;wBAAI,WAAU;;;;;;kCAGf,gOAAC;wBAAI,WAAU;wBAAiC,SAAQ;wBAAc,qBAAoB;;0CAExF,gOAAC;gCAAK,GAAE;gCAAwB,QAAO;gCAAU,aAAY;gCAAM,MAAK;gCAAO,SAAQ;;;;;;0CAEvF,gOAAC;gCAAK,GAAE;gCAAwB,QAAO;gCAAU,aAAY;gCAAM,MAAK;gCAAO,SAAQ;;;;;;0CAEvF,gOAAC;gCAAK,GAAE;gCAAwB,QAAO;gCAAU,aAAY;gCAAM,MAAK;gCAAO,SAAQ;;;;;;;;;;;;oBAIxF,eAAe,GAAG,CAAC,CAAC,sBACnB,gOAAC;4BAEC,SAAS,IAAM,cAAc,MAAM,EAAE;4BACrC,WAAW,IAAA,wJAAE,EACX,kFACA,oBAAoB,MAAM,EAAE,GACxB,qDACA;4BAEN,OAAO;gCACL,MAAM,GAAG,MAAM,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gCAC9B,KAAK,GAAG,MAAM,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gCAC7B,iBAAiB,MAAM,KAAK,CAAC,OAAO;4BACtC;4BACA,OAAO,GAAG,MAAM,WAAW,CAAC,GAAG,EAAE,MAAM,iBAAiB,EAAE;2BAbrD,MAAM,EAAE;;;;;;;;;;;0BAmBnB,gOAAC;gBAAI,WAAU;;kCACb,gOAAC;kCAAK;;;;;;kCACN,gOAAC;kCAAK;;;;;;;;;;;;;;;;;;AAId;GA1DgB;KAAA"}},
    {"offset": {"line": 3223, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,gOAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 3343, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { Slot } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n        ghost: \"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 [a&]:hover:underline\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      data-variant={variant}\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,6MAAG,EACvB,uaACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WACE;YACF,aACE;YACF,SACE;YACF,OAAO;YACP,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,UAAU,SAAS,EACnB,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,8OAAI,CAAC,IAAI,GAAG;IAEnC,qBACE,gOAAC;QACC,aAAU;QACV,gBAAc;QACd,WAAW,IAAA,wJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAjBS"}},
    {"offset": {"line": 3398, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Progress as ProgressPrimitive } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,gOAAC,0PAAiB,CAAC,IAAI;QACrB,aAAU;QACV,WAAW,IAAA,wJAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,gOAAC,0PAAiB,CAAC,SAAS;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 3442, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { ScrollArea as ScrollAreaPrimitive } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn(\"relative\", className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        \"flex touch-none p-px transition-colors select-none\",\n        orientation === \"vertical\" &&\n          \"h-full w-2.5 border-l border-l-transparent\",\n        orientation === \"horizontal\" &&\n          \"h-2.5 flex-col border-t border-t-transparent\",\n        className\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,gOAAC,oQAAmB,CAAC,IAAI;QACvB,aAAU;QACV,WAAW,IAAA,wJAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,gOAAC,oQAAmB,CAAC,QAAQ;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,gOAAC;;;;;0BACD,gOAAC,oQAAmB,CAAC,MAAM;;;;;;;;;;;AAGjC;KArBS;AAuBT,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,gOAAC,oQAAmB,CAAC,mBAAmB;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,wJAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,gOAAC,oQAAmB,CAAC,eAAe;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB;MAzBS"}},
    {"offset": {"line": 3520, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/components/ui/AgentDetailPanel.tsx"],"sourcesContent":["'use client';\n\nimport { X, Clock, CheckCircle, FileText, MapPin, Crown, ListOrdered, AlertCircle } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Agent, Activity } from '@/app/types/agents';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { cn } from '@/lib/utils';\n\ninterface AgentDetailPanelProps {\n  agent: Agent | null;\n  activities: Activity[];\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst STATUS_CONFIG: Record<Agent['status'], { label: string; color: string }> = {\n  idle: { label: 'Idle', color: 'bg-green-500' },\n  working: { label: 'Working', color: 'bg-blue-500' },\n  reviewing: { label: 'Reviewing', color: 'bg-amber-500' },\n  alert: { label: 'Alert', color: 'bg-red-500' },\n  offline: { label: 'Offline', color: 'bg-gray-500' },\n};\n\nconst ACTIVITY_ICONS: Record<Activity['type'], string> = {\n  research: '🔍',\n  content: '📝',\n  security: '🔒',\n  'code-review': '👁️',\n  automation: '⚙️',\n  analysis: '📊',\n  operations: '📦',\n};\n\nexport function AgentDetailPanel({ agent, activities, isOpen, onClose }: AgentDetailPanelProps) {\n  if (!agent) return null;\n\n  const status = STATUS_CONFIG[agent.status];\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ x: '100%', opacity: 0 }}\n          animate={{ x: 0, opacity: 1 }}\n          exit={{ x: '100%', opacity: 0 }}\n          transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n          className=\"fixed top-0 right-0 z-50 h-full w-96 bg-black/90 backdrop-blur-xl border-l border-white/10 shadow-2xl\"\n        >\n          <ScrollArea className=\"h-full\">\n            <div className=\"p-6 space-y-6\">\n              {/* Header */}\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div\n                    className=\"w-12 h-12 rounded-full flex items-center justify-center shadow-lg\"\n                    style={{\n                      background: `linear-gradient(135deg, ${agent.theme.primary}, ${agent.theme.secondary})`,\n                    }}\n                  >\n                    <Crown className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-bold text-white\">{agent.displayName}</h2>\n                    <p className=\"text-sm text-white/60 capitalize\">{agent.role} Agent</p>\n                  </div>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={onClose}\n                  className=\"text-white/50 hover:text-white hover:bg-white/10\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </Button>\n              </div>\n\n              {/* Status */}\n              <div className=\"flex items-center gap-3\">\n                <Badge\n                  variant=\"outline\"\n                  className={cn(\n                    'text-white border-none',\n                    status.color.replace('bg-', 'bg-').replace('500', '500/20')\n                  )}\n                >\n                  <span className={cn('w-2 h-2 rounded-full mr-2', status.color)} />\n                  {status.label}\n                </Badge>\n                {agent.currentTask && (\n                  <span className=\"text-sm text-white/60\">\n                    {Math.round(agent.currentTask.progress)}% complete\n                  </span>\n                )}\n              </div>\n\n              {/* Historical Context */}\n              <Card className=\"bg-white/5 border-white/10 p-4\">\n                <div className=\"flex items-center gap-2 text-amber-400 mb-2\">\n                  <MapPin className=\"w-4 h-4\" />\n                  <span className=\"text-sm font-medium\">{agent.historicalCapital}</span>\n                </div>\n                <p className=\"text-sm text-white/70 leading-relaxed\">\n                  {agent.historicalContext}\n                </p>\n                <div className=\"mt-3 text-xs text-white/40\">\n                  {agent.coordinates.lat.toFixed(1)}°N, {agent.coordinates.lng.toFixed(1)}°E\n                </div>\n              </Card>\n\n              {/* Current Task */}\n              {agent.currentTask && (\n                <div className=\"space-y-3\">\n                  <h3 className=\"text-sm font-semibold text-white/80 flex items-center gap-2\">\n                    <Clock className=\"w-4 h-4\" />\n                    Current Task\n                  </h3>\n                  <Card className=\"bg-white/5 border-white/10 p-4 space-y-3\">\n                    <div>\n                      <h4 className=\"text-white font-medium\">{agent.currentTask.title}</h4>\n                      <p className=\"text-sm text-white/60 mt-1\">\n                        {agent.currentTask.description}\n                      </p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <div className=\"flex justify-between text-xs text-white/50\">\n                        <span>Progress</span>\n                        <span>{Math.round(agent.currentTask.progress)}%</span>\n                      </div>\n                      <Progress value={agent.currentTask.progress} className=\"h-2\" />\n                    </div>\n                    <div className=\"flex justify-between text-xs text-white/40\">\n                      <span>Started {new Date(agent.currentTask.startedAt).toLocaleTimeString()}</span>\n                      {agent.currentTask.estimatedCompletion && (\n                        <span>Est. {new Date(agent.currentTask.estimatedCompletion).toLocaleTimeString()}</span>\n                      )}\n                    </div>\n                  </Card>\n                </div>\n              )}\n\n              {/* Task Queue */}\n              {agent.queue.length > 0 && (\n                <div className=\"space-y-3\">\n                  <h3 className=\"text-sm font-semibold text-white/80 flex items-center gap-2\">\n                    <ListOrdered className=\"w-4 h-4\" />\n                    Task Queue ({agent.queue.length})\n                  </h3>\n                  <div className=\"space-y-2\">\n                    {agent.queue.map((task, index) => (\n                      <Card\n                        key={task.id}\n                        className=\"bg-white/5 border-white/10 p-3 hover:bg-white/10 transition-colors\"\n                      >\n                        <div className=\"flex items-start gap-3\">\n                          <div className=\"flex-shrink-0 w-6 h-6 rounded-full bg-white/10 flex items-center justify-center text-xs text-white/60\">\n                            {index + 1}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2\">\n                              <h4 className=\"text-sm font-medium text-white truncate\">\n                                {task.title}\n                              </h4>\n                              {task.priority === 'high' && (\n                                <AlertCircle className=\"w-3 h-3 text-red-400\" />\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-3 mt-1\">\n                              <Badge\n                                variant=\"outline\"\n                                className={`\n                                  text-xs border-none\n                                  ${task.priority === 'high' ? 'bg-red-500/20 text-red-300' : ''}\n                                  ${task.priority === 'medium' ? 'bg-amber-500/20 text-amber-300' : ''}\n                                  ${task.priority === 'low' ? 'bg-green-500/20 text-green-300' : ''}\n                                `}\n                              >\n                                {task.priority}\n                              </Badge>\n                              <span className=\"text-xs text-white/40\">\n                                ~{task.estimatedDuration} min\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Metrics */}\n              <div className=\"space-y-3\">\n                <h3 className=\"text-sm font-semibold text-white/80\">Today&apos;s Metrics</h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <Card className=\"bg-white/5 border-white/10 p-3\">\n                    <div className=\"text-2xl font-bold text-white\">{agent.metrics.tasksCompleted}</div>\n                    <div className=\"text-xs text-white/50\">Tasks Completed</div>\n                  </Card>\n                  <Card className=\"bg-white/5 border-white/10 p-3\">\n                    <div className=\"text-2xl font-bold text-white\">{agent.metrics.itemsProduced}</div>\n                    <div className=\"text-xs text-white/50\">Items Produced</div>\n                  </Card>\n                  <Card className=\"bg-white/5 border-white/10 p-3\">\n                    <div className=\"text-2xl font-bold text-white\">\n                      {Math.floor(agent.metrics.activeTimeMinutes / 60)}h {agent.metrics.activeTimeMinutes % 60}m\n                    </div>\n                    <div className=\"text-xs text-white/50\">Active Time</div>\n                  </Card>\n                  <Card className=\"bg-white/5 border-white/10 p-3\">\n                    <div className=\"text-2xl font-bold text-white\">\n                      {new Date(agent.metrics.lastActiveAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                    </div>\n                    <div className=\"text-xs text-white/50\">Last Active</div>\n                  </Card>\n                </div>\n              </div>\n\n              {/* Recent Activity */}\n              {activities.length > 0 && (\n                <div className=\"space-y-3\">\n                  <h3 className=\"text-sm font-semibold text-white/80 flex items-center gap-2\">\n                    <FileText className=\"w-4 h-4\" />\n                    Recent Activity\n                  </h3>\n                  <div className=\"space-y-2\">\n                    {activities.slice(0, 5).map((activity) => (\n                      <Card\n                        key={activity.id}\n                        className=\"bg-white/5 border-white/10 p-3 hover:bg-white/10 transition-colors\"\n                      >\n                        <div className=\"flex items-start gap-3\">\n                          <span className=\"text-lg\">{ACTIVITY_ICONS[activity.type]}</span>\n                          <div className=\"flex-1 min-w-0\">\n                            <h4 className=\"text-sm font-medium text-white truncate\">\n                              {activity.title}\n                            </h4>\n                            <p className=\"text-xs text-white/50 mt-0.5\">\n                              {activity.description}\n                            </p>\n                            <div className=\"text-xs text-white/30 mt-1\">\n                              {new Date(activity.timestamp).toLocaleTimeString()}\n                            </div>\n                          </div>\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Camp Info */}\n              <Card className=\"bg-white/5 border-white/10 p-4\">\n                <h3 className=\"text-sm font-semibold text-white/80 mb-2 capitalize\">\n                  {agent.camp.type.replace('-', ' ')}\n                </h3>\n                <p className=\"text-sm text-white/60\">{agent.camp.description}</p>\n                <div className=\"flex flex-wrap gap-2 mt-3\">\n                  {agent.camp.props.map((prop) => (\n                    <Badge key={prop} variant=\"outline\" className=\"text-white/50 border-white/20 text-xs\">\n                      {prop}\n                    </Badge>\n                  ))}\n                </div>\n              </Card>\n            </div>\n          </ScrollArea>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4335, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/hooks/useFileWatcher.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { useAgentStore } from '@/app/stores/agentStore';\nimport { Activity, Deliverable } from '@/app/types/agents';\n\n// Map file patterns to agents and activity types\nconst FILE_PATTERNS = [\n  { pattern: /kublai/i, agentId: 'kublai', type: 'automation' as const },\n  { pattern: /mongke/i, agentId: 'mongke', type: 'research' as const },\n  { pattern: /ogedei/i, agentId: 'ogedei', type: 'content' as const },\n  { pattern: /temujin/i, agentId: 'temujin', type: 'security' as const },\n  { pattern: /jochi/i, agentId: 'jochi', type: 'analysis' as const },\n  { pattern: /chagatai/i, agentId: 'chagatai', type: 'operations' as const },\n];\n\nconst DELIVERABLES_PATH = '/data/workspace/deliverables';\n\nexport function useFileWatcher() {\n  const { updateAgentStatus, addActivity, addDeliverable, updateAgentTask } = useAgentStore();\n  const watchedFiles = useRef<Set<string>>(new Set());\n\n  useEffect(() => {\n    // For client-side, we'll use polling since chokidar requires Node.js\n    const pollInterval = setInterval(async () => {\n      try {\n        // Fetch deliverables from API\n        const response = await fetch('/api/deliverables');\n        if (!response.ok) return;\n\n        const data = await response.json();\n        const files: string[] = data.files || [];\n\n        // Check for new files\n        for (const file of files) {\n          if (!watchedFiles.current.has(file)) {\n            watchedFiles.current.add(file);\n            handleNewFile(file);\n          }\n        }\n      } catch (error) {\n        // Silent fail - will retry on next poll\n      }\n    }, 5000); // Poll every 5 seconds\n\n    return () => clearInterval(pollInterval);\n  }, []);\n\n  function handleNewFile(filePath: string) {\n    const fileName = filePath.split('/').pop() || '';\n\n    // Find matching agent\n    const match = FILE_PATTERNS.find((p) => p.pattern.test(fileName));\n    if (!match) return;\n\n    const { agentId, type } = match;\n\n    // Update agent status\n    updateAgentStatus(agentId, 'working');\n\n    // Create activity\n    const activity: Activity = {\n      id: `activity-${Date.now()}`,\n      agentId,\n      type,\n      title: `Created ${fileName}`,\n      description: `New deliverable created at ${filePath}`,\n      timestamp: new Date(),\n      deliverablePath: filePath,\n    };\n    addActivity(activity);\n\n    // Create deliverable\n    const deliverable: Deliverable = {\n      id: `deliverable-${Date.now()}`,\n      agentId,\n      type,\n      title: fileName,\n      path: filePath,\n      createdAt: new Date(),\n      modifiedAt: new Date(),\n      size: 0,\n    };\n    addDeliverable(deliverable);\n\n    // Simulate task progress\n    simulateTaskProgress(agentId, fileName);\n\n    // Reset status after delay\n    setTimeout(() => {\n      updateAgentStatus(agentId, 'idle');\n    }, 30000);\n  }\n\n  function simulateTaskProgress(agentId: string, taskName: string) {\n    const task = {\n      id: `task-${Date.now()}`,\n      title: `Processing ${taskName}`,\n      description: 'Analyzing and integrating deliverable',\n      progress: 0,\n      startedAt: new Date(),\n      estimatedCompletion: new Date(Date.now() + 5 * 60 * 1000), // 5 min estimate\n    };\n\n    updateAgentTask(agentId, task);\n\n    // Simulate progress updates\n    let progress = 0;\n    const interval = setInterval(() => {\n      progress += 10;\n      if (progress >= 100) {\n        clearInterval(interval);\n        updateAgentTask(agentId, {\n          ...task,\n          progress: 100,\n        });\n        setTimeout(() => updateAgentTask(agentId, undefined), 2000);\n      } else {\n        updateAgentTask(agentId, { ...task, progress });\n      }\n    }, 3000);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4491, "column": 0}, "map": {"version":3,"sources":["file:///Users/kurultai/molt/steppe-visualization/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { SteppeScene } from './components/scene/SteppeScene';\nimport { Header } from './components/ui/Header';\nimport { MiniMap } from './components/ui/MiniMap';\nimport { AgentDetailPanel } from './components/ui/AgentDetailPanel';\nimport { useAgentStore } from './stores/agentStore';\nimport { useFileWatcher } from './hooks/useFileWatcher';\n\nexport default function Home() {\n  const {\n    agents,\n    selectedAgentId,\n    isDetailPanelOpen,\n    selectAgent,\n    toggleDetailPanel,\n    getSelectedAgent,\n    getAgentActivities,\n  } = useAgentStore();\n\n  // Initialize file watcher\n  useFileWatcher();\n\n  const selectedAgent = getSelectedAgent();\n  const selectedAgentActivities = selectedAgentId\n    ? getAgentActivities(selectedAgentId)\n    : [];\n\n  return (\n    <main className=\"relative w-screen h-screen bg-black overflow-hidden\">\n      {/* 3D Scene */}\n      <SteppeScene />\n\n      {/* UI Overlay */}\n      <Header\n        onToggleMap={() => {}}\n        onToggleSettings={() => {}}\n        onToggleHelp={() => {}}\n      />\n\n      {/* Mini Map */}\n      <MiniMap\n        agents={agents}\n        selectedAgentId={selectedAgentId}\n        onSelectAgent={(id) => {\n          selectAgent(id);\n          toggleDetailPanel(true);\n        }}\n      />\n\n      {/* Agent Detail Panel */}\n      <AgentDetailPanel\n        agent={selectedAgent || null}\n        activities={selectedAgentActivities}\n        isOpen={isDetailPanelOpen}\n        onClose={() => {\n          selectAgent(null);\n          toggleDetailPanel(false);\n        }}\n      />\n\n      {/* Instructions overlay */}\n      <div className=\"fixed bottom-6 right-6 z-40 text-right\">\n        <div className=\"bg-black/70 backdrop-blur-sm rounded-lg px-5 py-4 text-white/80 text-base\">\n          <p className=\"font-semibold mb-2 text-lg\">Controls</p>\n          <p className=\"py-0.5\">🖱️ Click + Drag to orbit/pivot</p>\n          <p className=\"py-0.5\">🖱️ Click agent to view details</p>\n          <p className=\"py-0.5\">📜 Scroll / Pinch to zoom</p>\n          <p className=\"py-0.5\">⌨️ WASD / Arrow keys to pan</p>\n          <p className=\"py-0.5\">👆 2-finger drag to pan map</p>\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS;;IACtB,MAAM,EACJ,MAAM,EACN,eAAe,EACf,iBAAiB,EACjB,WAAW,EACX,iBAAiB,EACjB,gBAAgB,EAChB,kBAAkB,EACnB,GAAG,IAAA,kLAAa;IAEjB,0BAA0B;IAC1B,IAAA,sLAAc;IAEd,MAAM,gBAAgB;IACtB,MAAM,0BAA0B,kBAC5B,mBAAmB,mBACnB,EAAE;IAEN,qBACE,gOAAC;QAAK,WAAU;;0BAEd,gOAAC,+LAAW;;;;;0BAGZ,gOAAC,kLAAM;gBACL,aAAa,KAAO;gBACpB,kBAAkB,KAAO;gBACzB,cAAc,KAAO;;;;;;0BAIvB,gOAAC,oLAAO;gBACN,QAAQ;gBACR,iBAAiB;gBACjB,eAAe,CAAC;oBACd,YAAY;oBACZ,kBAAkB;gBACpB;;;;;;0BAIF,gOAAC,sMAAgB;gBACf,OAAO,iBAAiB;gBACxB,YAAY;gBACZ,QAAQ;gBACR,SAAS;oBACP,YAAY;oBACZ,kBAAkB;gBACpB;;;;;;0BAIF,gOAAC;gBAAI,WAAU;0BACb,cAAA,gOAAC;oBAAI,WAAU;;sCACb,gOAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAC1C,gOAAC;4BAAE,WAAU;sCAAS;;;;;;sCACtB,gOAAC;4BAAE,WAAU;sCAAS;;;;;;sCACtB,gOAAC;4BAAE,WAAU;sCAAS;;;;;;sCACtB,gOAAC;4BAAE,WAAU;sCAAS;;;;;;sCACtB,gOAAC;4BAAE,WAAU;sCAAS;;;;;;;;;;;;;;;;;;;;;;;AAKhC;GAjEwB;;QASlB,kLAAa;QAGjB,sLAAc;;;KAZQ"}}]
}